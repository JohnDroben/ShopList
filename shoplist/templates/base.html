{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}ShopList{% endblock %}</title>
    <!-- Tailwind via CDN for rapid test -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#f5fbff',
                            100: '#e6f4ff',
                            200: '#bfdefa',
                            300: '#8cc4f5',
                            400: '#56a9ef',
                            500: '#2f8fe6',
                            600: '#1c72c4',
                            700: '#165aa0',
                            800: '#12477f',
                            900: '#0e3662',
                        }
                    },
                    borderRadius: { '2xl': '1.5rem' }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css">
    <link rel="icon" href="{% static 'images/logo.svg' %}">
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
</head>
<body class="min-h-screen bg-gray-50 text-gray-800">
    <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b">
        <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
            <a href="/" class="flex items-center gap-2 group">
                <img src="{% static 'images/logo.svg' %}" class="h-8 w-8" alt="logo"/>
                <span class="font-bold tracking-tight text-xl group-hover:text-brand-600 transition hidden sm:block">ShopList</span>
            </a>

            <!-- Mobile menu button -->
            <button class="sm:hidden" id="mobile-menu-button">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>

            <nav class="hidden sm:flex items-center gap-4">
                <a href="/shop/" class="hover:text-brand-600">–ö–∞—Ç–∞–ª–æ–≥</a>
                <a href="/pages/about/" class="hover:text-brand-600">–û –Ω–∞—Å</a>
                <a href="/pages/delivery/" class="hover:text-brand-600">–î–æ—Å—Ç–∞–≤–∫–∞/–û–ø–ª–∞—Ç–∞</a>
            </nav>
            <div class="flex items-center gap-3">
                <a href="/cart/" class="inline-flex items-center gap-1 px-3 py-1.5 rounded-full border hover:bg-gray-100">
                    üõí <span>{% with cart=cart_summary %}{{ cart.total_qty }}{% endwith %}</span>
                </a>
                {% if user.is_authenticated %}
                <a href="/users/profile/" class="hover:text-brand-600 hidden sm:block">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                <a href="/users/logout/" class="text-sm px-3 py-1 rounded-full border">–í—ã–π—Ç–∏</a>
                {% else %}
                <a href="/users/login/" class="text-sm px-3 py-1 rounded-full border">–í–æ–π—Ç–∏</a>
                <a href="/users/signup/" class="text-sm px-3 py-1 rounded-full bg-brand-600 text-white hidden sm:block">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {% endif %}
            </div>
        </div>

        <!-- Mobile menu -->
        <div class="sm:hidden hidden bg-white border-t" id="mobile-menu">
            <div class="px-4 py-3 space-y-2">
                <a href="/shop/" class="block py-2 hover:text-brand-600">–ö–∞—Ç–∞–ª–æ–≥</a>
                <a href="/pages/about/" class="block py-2 hover:text-brand-600">–û –Ω–∞—Å</a>
                <a href="/pages/delivery/" class="block py-2 hover:text-brand-600">–î–æ—Å—Ç–∞–≤–∫–∞/–û–ø–ª–∞—Ç–∞</a>
                {% if user.is_authenticated %}
                <a href="/users/profile/" class="block py-2 hover:text-brand-600">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                {% else %}
                <a href="/users/signup/" class="block py-2 text-brand-600 font-semibold">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {% endif %}
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-8">
        {% block content %}{% endblock %}
    </main>

    <footer class="border-t py-8 text-sm text-gray-500">
        <div class="max-w-7xl mx-auto px-4 flex flex-col sm:flex-row justify-between gap-3">
            <p>¬© {{ now|date:"Y" }} ShopList. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            <p><a href="/admin/">–ê–¥–º–∏–Ω–∫–∞</a></p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
    <script>
        // Mobile menu functionality
        document.getElementById('mobile-menu-button').addEventListener('click', function() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        });

        // GLightbox initialization
        window.lightbox = GLightbox();
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>