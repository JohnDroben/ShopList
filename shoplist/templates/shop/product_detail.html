{% extends 'base.html' %}
{% load static %}

{% block title %}{{ product.name }} --- ShopList{% endblock %}

{% block content %}
<div class="grid md:grid-cols-2 gap-8">
    <div class="space-y-2">
        <a href="{% if product.image %}{{ product.image.url }}{% else %}{% static 'images/placeholder.svg' %}{% endif %}" class="glightbox" data-gallery="product">
            <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'images/placeholder.svg' %}{% endif %}" class="w-full rounded-2xl border" alt="{{ product.name }}"/>
        </a>
    </div>
    <div>
        <h1 class="text-3xl font-bold">{{ product.name }}</h1>
        <p class="text-gray-600 mt-3">{{ product.description }}</p>
        <div class="mt-6 flex items-center justify-between">
            <span class="text-2xl font-bold">{{ product.price }} ‚ÇΩ</span>
            <form action="/cart/add/{{ product.id }}/" method="post">
                {% csrf_token %}
                <button class="px-5 py-3 rounded-2xl bg-brand-600 text-white">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
            </form>
        </div>
    </div>
</div>

<!-- –ë–ª–æ–∫ —Å –∞–¥—Ä–µ—Å–∞–º–∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤ –∏ –∫–∞—Ä—Ç–æ–π -->
<div class="mt-8">
    <h2 class="text-2xl font-bold mb-4">–î–æ—Å—Ç—É–ø–Ω–æ –≤ –º–∞–≥–∞–∑–∏–Ω–∞—Ö</h2>

    <div class="grid md:grid-cols-2 gap-6">
        <!-- –°–ø–∏—Å–æ–∫ –∞–¥—Ä–µ—Å–æ–≤ -->
        <div class="bg-gray-50 p-4 rounded-2xl">
            <h3 class="font-semibold mb-3">–ù–∞—à–∏ –º–∞–≥–∞–∑–∏–Ω—ã:</h3>
            <ul class="space-y-2">
                <li class="flex items-start">
                    <span class="text-brand-600 mr-2">üìç</span>
                    <span>–ú–æ—Å–∫–≤–∞, —É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, –¥. 10</span>
                </li>
                <li class="flex items-start">
                    <span class="text-brand-600 mr-2">üìç</span>
                    <span>–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –ù–µ–≤—Å–∫–∏–π –ø—Ä., –¥. 25</span>
                </li>
                <li class="flex items-start">
                    <span class="text-brand-600 mr-2">üìç</span>
                    <span>–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 42</span>
                </li>
                <li class="flex items-start">
                    <span class="text-brand-600 mr-2">üìç</span>
                    <span>–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫, –ö—Ä–∞—Å–Ω—ã–π –ø—Ä., –¥. 15</span>
                </li>
                <li class="flex items-start">
                    <span class="text-brand-600 mr-2">üìç</span>
                    <span>–ö–∞–∑–∞–Ω—å, —É–ª. –ë–∞—É–º–∞–Ω–∞, –¥. 7</span>
                </li>
            </ul>
        </div>

        <!-- –ö–∞—Ä—Ç–∞ -->
        <div class="bg-gray-100 rounded-2xl overflow-hidden">
            <div id="map" class="h-64 w-full"></div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<!-- –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç—ã API -->
<script src="https://api-maps.yandex.ru/2.1/?apikey=–≤–∞—à_api_–∫–ª—é—á&lang=ru_RU" type="text/javascript"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
        ymaps.ready(init);

        function init() {
            // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É
            var map = new ymaps.Map('map', {
                center: [55.76, 37.64], // –ú–æ—Å–∫–≤–∞
                zoom: 4,
                controls: ['zoomControl', 'fullscreenControl']
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∫–∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤
            var shops = [
                {coords: [55.76, 37.64], name: '–ú–æ—Å–∫–≤–∞, —É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, –¥. 10'},
                {coords: [59.94, 30.31], name: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –ù–µ–≤—Å–∫–∏–π –ø—Ä., –¥. 25'},
                {coords: [56.84, 60.61], name: '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 42'},
                {coords: [55.01, 82.92], name: '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫, –ö—Ä–∞—Å–Ω—ã–π –ø—Ä., –¥. 15'},
                {coords: [55.79, 49.11], name: '–ö–∞–∑–∞–Ω—å, —É–ª. –ë–∞—É–º–∞–Ω–∞, –¥. 7'}
            ];

            shops.forEach(function(shop) {
                var placemark = new ymaps.Placemark(shop.coords, {
                    hintContent: shop.name,
                    balloonContent: shop.name
                });

                map.geoObjects.add(placemark);
            });

            // –ï—Å–ª–∏ –µ—Å—Ç—å –º–µ—Ç–∫–∏, –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–∞—Ä—Ç—É –ø–æ–¥ –Ω–∏—Ö
            if (shops.length > 0) {
                map.setBounds(map.geoObjects.getBounds(), {
                    checkZoomRange: true
                });
            }
        }
    });
</script>
{% endblock %}